## üìò –ö–∞–∫ —è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª –ò–ò –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –∑–∞–¥–∞–Ω–∏—è (NextEdu Backend)

### üîπ –û—Å–Ω–æ–≤–Ω–æ–µ –∑–∞–¥–∞–Ω–∏–µ (–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è, CRUD, –ø—Ä–æ–≥—Ä–µ—Å—Å, –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è)


---

**–¢–µ–º–∞ - –∫–∞—Ä–∫–∞—Å CRUD –∏ –ø—Ä–∞–≤–∏–ª–∞ —Å–ª—ç—à–µ–π**

**–ú–æ–π –ø—Ä–æ–º–ø—Ç:**
```
–°–≥–µ–Ω–µ—Ä–∏—Ä—É–π ViewSet –∏ –º–∞—Ä—à—Ä—É—Ç—ã –¥–ª—è –º–æ–¥–µ–ª–µ–π Course –∏ Lesson –Ω–∞ DRF.
–í–∞–∂–Ω–æ: —Ä–µ—Å—É—Ä—Å—ã –æ—Ç DefaultRouter –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å–æ —Å–ª—ç—à–µ–º (/api/courses/),
–∞ –∫–∞—Å—Ç–æ–º–Ω—ã–µ –ø—É—Ç–∏ - –±–µ–∑ —Å–ª—ç—à–∞ (/api/auth/token). –î–æ–±–∞–≤—å –ø—Ä–∏–º–µ—Ä—ã curl.
```
**–§—Ä–∞–≥–º–µ–Ω—Ç –æ—Ç–≤–µ—Ç–∞ –ò–ò**
```
... /api/courses/, /api/courses/{id}/ - —Å–æ —Å–ª—ç—à–µ–º;
... /api/auth/token - –±–µ–∑ —Å–ª—ç—à–∞.
curl -X POST http://127.0.0.1:8000/api/auth/token ...
```
**–ß—Ç–æ —Å–¥–µ–ª–∞–ª –Ω–∞ –±—ç–∫–µ–Ω–¥–µ**
- –ø—Ä–æ–≤–µ—Ä–∏–ª —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –Ω–∞—à–µ–º—É `urls.py` –∏ –ø–æ–¥—á–∏—Å—Ç–∏–ª —Ö–≤–æ—Å—Ç—ã URL;
- —Å–¥–µ–ª–∞–ª smoke-–ø—Ä–∏–º–µ—Ä—ã —Å `curl`, –æ—Ç–¥–µ–ª—å–Ω–æ –¥–ª—è —Ä–µ—Å—É—Ä—Å–æ–≤ –∏ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –ø—É—Ç–µ–π.

---

**–¢–µ–º–∞ - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ Swagger (–ø–æ–ª—è –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è)**

**–ú–æ–π –ø—Ä–æ–º–ø—Ç:**
```
–£ –º–µ–Ω—è POST /api/auth/register –≤–∏–¥–µ–Ω –≤ Swagger, –Ω–æ –±–µ–∑ –ø–æ–ª–µ–π username/password.
–ü–æ–∫–∞–∂–∏, –∫–∞–∫ –æ–ø–∏—Å–∞—Ç—å request/response –¥–ª—è drf-spectacular.
```
**–§—Ä–∞–≥–º–µ–Ω—Ç –æ—Ç–≤–µ—Ç–∞ –ò–ò**
```
–î–æ–±–∞–≤—å—Ç–µ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ç–æ—Ä—ã RegisterRequest/Response –∏ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä @extend_schema(request=..., responses=...).
```
**–ß—Ç–æ —Å–¥–µ–ª–∞–ª –Ω–∞ –±—ç–∫–µ–Ω–¥–µ**
- —Å–æ–∑–¥–∞–ª `RegisterRequestSerializer` –∏ `RegisterResponseSerializer`;
- –ø–æ–≤–µ—Å–∏–ª `@extend_schema` –Ω–∞ —Ñ—É–Ω–∫—Ü–∏—é `register` - —Ñ–æ—Ä–º–∞ –∑–∞—Ä–∞–±–æ—Ç–∞–ª–∞, –º–æ–∂–Ω–æ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –ø—Ä—è–º–æ –∏–∑ Swagger.

---

**–¢–µ–º–∞ - –ø–æ—á–∏–Ω–∏—Ç—å ImportError: ask_ai**

**–ú–æ–π –ø—Ä–æ–º–ø—Ç:**
```
–ò–º–ø–æ—Ä—Ç –ø–∞–¥–∞–µ—Ç: from courses.ai_providers import ask_ai - —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–µ—Ç. –ö–∞–∫ –ª—É—á—à–µ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å?
```
**–ö–æ—Ä–æ—Ç–∫–∏–π –æ—Ç–≤–µ—Ç –ò–ò**
```
–°–¥–µ–ª–∞–π—Ç–µ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π ask_ai –≤ ai_providers.py –∏ –¥–µ—Ä–≥–∞–π—Ç–µ –µ–≥–æ –∏–∑ views.
```
**–ß—Ç–æ —Å–¥–µ–ª–∞–ª**
- –¥–æ–±–∞–≤–∏–ª `ask_ai(...)` –∏ –ø—É–±–ª–∏—á–Ω—ã–π `provider_chain(...)` –≤ `ai_providers.py`;
- —É–±—Ä–∞–ª –¥—É–±–ª–∏—Ä—É—é—â–∏–π —Ü–∏–∫–ª –ø–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º –∏–∑ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤ - —Ç–µ–ø–µ—Ä—å –æ–¥–Ω–∞ —Ç–æ—á–∫–∞ –ø—Ä–∞–≤–¥—ã;
- –ª–æ–≥–∏–∫–∞ –≤—ã–±–æ—Ä–∞ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞: `DEFAULT_PROVIDERS` –≤ .env + `?provider=`/`"provider"` –¥–ª—è override.

---

**–¢–µ–º–∞ - README + API.md**

**–ú–æ–π –ø—Ä–æ–º–ø—Ç:**
```
–°–æ–±–µ—Ä–∏ –≤–Ω—è—Ç–Ω—ã–π README: —É—Å—Ç–∞–Ω–æ–≤–∫–∞, .env, PostgreSQL (docker), –º–∏–≥—Ä–∞—Ü–∏–∏, —Ñ–∏–∫—Å—Ç—É—Ä–∞, –ø—Ä–∞–≤–∏–ª–∞ —Å–ª—ç—à–µ–π, fast-curl, —Å—Å—ã–ª–∫–∏ –Ω–∞ Swagger.
–í—ã–Ω–µ—Å–∏ –ø–æ–¥—Ä–æ–±–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã –≤ API.md. –°–¥–µ–ª–∞–π –∫—Ä–∞—Å–∏–≤–æ –∏ –∫–æ—Ä–æ—Ç–∫–æ.
```
**–ß—Ç–æ —Å–¥–µ–ª–∞–ª**
- –≤–∑—è–ª —Å–∫–µ–ª–µ—Ç, –¥–æ–±–∞–≤–∏–ª –∫–æ–Ω–∫—Ä–µ—Ç–∏–∫—É –ø–æ–¥ –Ω–∞—à –ø—Ä–æ–µ–∫—Ç;
- –≤—Å—Ç–∞–≤–∏–ª —Ä–∞–±–æ—á–∏–µ –∫–æ–º–∞–Ω–¥—ã –∏ –ø—Ä–æ–≤–µ—Ä–∏–ª –≤—Ä—É—á–Ω—É—é (—á—Ç–æ–±—ã –Ω–µ –±—ã–ª–æ ¬´–º–µ—Ä—Ç–≤—ã—Ö¬ª –ø—Ä–∏–º–µ—Ä–æ–≤).

**–í—ã–≤–æ–¥ –ø–æ –æ—Å–Ω–æ–≤–µ**
–ò–ò —É—Å–∫–æ—Ä–∏–ª —Ä—É—Ç–∏–Ω—É (—Å–∫–µ–ª–µ—Ç—ã, –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è, –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫—Ä–∞–µ–≤—ã—Ö –∫–µ–π—Å–æ–≤), –∞ —Ñ–∏–Ω–∞–ª—å–Ω—É—é –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å —è –æ—Å—Ç–∞–≤–∏–ª –∑–∞ —Å–æ–±–æ–π: –∫–∞–∂–¥—ã–π —Ä–æ—É—Ç, –∫–∞–∂–¥–∞—è –∫–æ–º–∞–Ω–¥–∞ - –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã –ª–æ–∫–∞–ª—å–Ω–æ.

---

### üîπ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –∑–∞–¥–∞–Ω–∏–µ (AI‚Äë–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∑–∞–¥–∞—á–∏ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ—à–µ–Ω–∏—è)

**–ú–æ–π –ø—Ä–æ–º–ø—Ç:**
```
–ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤ –±—ç–∫–µ–Ω–¥ –¥–≤–∞ —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞: /generate-task (—Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∑–∞–¥–∞–Ω–∏–µ –∏ —ç—Ç–∞–ª–æ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ), /check (–ø—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–≤–µ—Ç —Å—Ç—É–¥–µ–Ω—Ç–∞). 
–•–æ—á—É —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –≤—ã–∑–æ–≤ –ò–ò —Å fallback: —Å–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–∞–π–¥–µ—Ä –∏–∑ ?provider=, –ø–æ—Ç–æ–º DEFAULT_PROVIDERS –∏–∑ .env. 
–ü–æ—Å–æ–≤–µ—Ç—É–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –∫–∞–∫ –ª—É—á—à–µ –æ–±–æ–π—Ç–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã.
```
**–û—Ç–≤–µ—Ç –ò–ò:**
```
–°–¥–µ–ª–∞–π ask_ai(prompt: str, providers: list[str] | None = None, ...) -> str.
–¶–µ–ø–æ—á–∫—É —Å–æ–±–∏—Ä–∞–π —Ç–∞–∫: provider_chain(DEFAULT_PROVIDERS, override) -> ['override', 'gigachat', 'google', ...].
ask_ai –ø–µ—Ä–µ–±–∏—Ä–∞–µ—Ç –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã –ø–æ –ø–æ—Ä—è–¥–∫—É –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–µ—Ä–≤—ã–π –Ω–µ–ø—É—Å—Ç–æ–π –æ—Ç–≤–µ—Ç.
```
**–ö–∞–∫ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–ª:**
- –í `ai_providers.py` –¥–æ–±–∞–≤–∏–ª –ø—É–±–ª–∏—á–Ω—ã–µ `provider_chain(...)` –∏ `ask_ai(...)`.
- –í –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞—Ö –∏—Å–ø–æ–ª—å–∑—É—é: 
  ```python
  chain = provider_chain(os.getenv("DEFAULT_PROVIDERS"), override)
  text = ask_ai(prompt=..., providers=chain)
  ```

---
#### –¢–µ–º–∞ - –°—Ç—Ä–∞—Ç–µ–≥–∏—è fallback –ø–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º
**–ú–æ–π –ø—Ä–æ–º–ø—Ç**  
```
–ù—É–∂–Ω–æ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ –≤—ã–∑—ã–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö AI-–ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º –∏ override –∏–∑ –∑–∞–ø—Ä–æ—Å–∞.
–ü–æ–¥—Å–∫–∞–∂–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –∫–∞–∫ –∞–∫–∫—É—Ä–∞—Ç–Ω–æ —Å–æ–±—Ä–∞—Ç—å —Ü–µ–ø–æ—á–∫—É –∏–∑ DEFAULT_PROVIDERS (+ ?provider=),
—á—Ç–æ–±—ã –ø–µ—Ä–≤–∞—è —É—Å–ø–µ—à–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–ª–∞—Å—å –∏ –≤–æ–∑–≤—Ä–∞—â–∞–ª–∞—Å—å.
```
**–û—Ç–≤–µ—Ç –ò–ò (—Ñ—Ä–∞–≥–º–µ–Ω—Ç)**  
```
–°–¥–µ–ª–∞–π helper provider_chain(env_value, override) –∏ ask_ai(prompt, providers).
provider_chain –ø–∞—Ä—Å–∏—Ç .env –∏ –ø–æ–¥–Ω–∏–º–∞–µ—Ç override –≤ –Ω–∞—á–∞–ª–æ.
ask_ai –±–µ–∂–∏—Ç –ø–æ providers –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–µ—Ä–≤—ã–π –Ω–µ–ø—É—Å—Ç–æ–π –æ—Ç–≤–µ—Ç.
```
**–ö–∞–∫ –ø—Ä–∏–º–µ–Ω–∏–ª**  
–í—ã–Ω–µ—Å `provider_chain(...)` –∏ `ask_ai(...)` –≤ `ai_providers.py`, –∞ –≤–æ –≤—å—é—Ö–∞—Ö –∏—Å–ø–æ–ª—å–∑—É—é –æ–¥–Ω—É —Å—Ç—Ä–æ–∫—É:
```python
chain = provider_chain(os.getenv("DEFAULT_PROVIDERS"), override)
text = ask_ai(prompt=prompt, providers=chain)
```
---
#### –¢–µ–º–∞ - –ù–∞–¥—ë–∂–Ω—ã–π —Ä–∞–∑–±–æ—Ä –æ—Ç–≤–µ—Ç–æ–≤ –º–æ–¥–µ–ª–∏ –¥–ª—è /generate-task
**–ú–æ–π –ø—Ä–æ–º–ø—Ç**  
```
–ú–æ–¥–µ–ª—å –∏–Ω–æ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–µ—Å—Ç—Ä–æ–≥–∏–π JSON –∏–ª–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç —Ç–µ–∫—Å—Ç –≤–æ–∫—Ä—É–≥.
–î–∞–π –±–µ–∑–æ–ø–∞—Å–Ω—ã–π —à–∞–±–ª–æ–Ω –ø–∞—Ä—Å–∏–Ω–≥–∞: –ø–æ–ø—ã—Ç–∫–∞ json.loads, –∞ –ø—Ä–∏ –æ—à–∏–±–∫–µ - —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å—ã—Ä–æ–π –æ—Ç–≤–µ—Ç –±–µ–∑ –ø–∞–¥–µ–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–∞.
```
**–û—Ç–≤–µ—Ç –ò–ò (—Ñ—Ä–∞–≥–º–µ–Ω—Ç)**  
```
try: data = json.loads(raw) ... 
except: task_text = raw; solution = ""
```
**–ö–∞–∫ –ø—Ä–∏–º–µ–Ω–∏–ª**  
–ò–º–µ–Ω–Ω–æ —Ç–∞–∫ –∏ —Å–¥–µ–ª–∞–ª –≤ `generate_task`: —Å–Ω–∞—á–∞–ª–∞ `json.loads(raw)`, –∏–Ω–∞—á–µ - –ø–∏—à—É –≤–µ—Å—å `raw` –≤ `task_text`, `solution=""` –∏ —Å–æ—Ö—Ä–∞–Ω—è—é `GeneratedTask` (–∏—Å—Ç–æ—Ä–∏—é –≥–µ–Ω–µ—Ä–∞—Ü–∏–π –Ω–µ —Ç–µ—Ä—è–µ–º).


---

#### –¢–µ–º–∞ - –ë–∏–Ω–∞—Ä–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ /check (true/false) –±–µ–∑ ¬´–±–æ–ª—Ç–ª–∏–≤—ã—Ö¬ª –æ—Ç–≤–µ—Ç–æ–≤
**–ú–æ–π –ø—Ä–æ–º–ø—Ç**  
```
–ö–∞–∫ –Ω–∞–¥—ë–∂–Ω–æ –ø—Ä–µ–≤—Ä–∞—Ç–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–π —Ç–µ–∫—Å—Ç –æ—Ç–≤–µ—Ç–∞ –º–æ–¥–µ–ª–∏ –≤ –±—É–ª–µ–≤–æ?
–£—Å–ª–æ–≤–∏–µ: —Å—á–∏—Ç–∞–µ–º TRUE —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –µ—Å—Ç—å 'true' –∏ –Ω–µ—Ç 'false' (–≤ –ª—é–±–æ–º —Ä–µ–≥–∏—Å—Ç—Ä–µ).
```
**–û—Ç–≤–µ—Ç –ò–ò (—Ñ—Ä–∞–≥–º–µ–Ω—Ç)**  
```
normalized = raw.strip().lower()
is_true  = 'true' in normalized and 'false' not in normalized
```
**–ö–∞–∫ –ø—Ä–∏–º–µ–Ω–∏–ª**  
–†–æ–≤–Ω–æ —Ç–∞–∫ –∏ —Å–¥–µ–ª–∞–ª - –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è, –Ω–æ —É—Å—Ç–æ–π—á–∏–≤–∞—è –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è, —á—Ç–æ–±—ã –∏—Å–∫–ª—é—á–∏—Ç—å –¥–≤—É—Å–º—ã—Å–ª–µ–Ω–Ω–æ—Å—Ç–∏.

---

#### –¢–µ–º–∞ - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Swagger –¥–ª—è –∫–∞—Å—Ç–æ–º–Ω—ã—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
**–ú–æ–π –ø—Ä–æ–º–ø—Ç**  
```
–§–æ—Ä–º—ã –≤ Swagger –¥–ª—è /generate-task –∏ /check –ø—É—Å—Ç—ã–µ.
–ö–∞–∫ –∫—Ä–∞—Ç–∫–æ –æ–ø–∏—Å–∞—Ç—å request/response —á–µ—Ä–µ–∑ drf-spectacular?
```
**–û—Ç–≤–µ—Ç –ò–ò (—Ñ—Ä–∞–≥–º–µ–Ω—Ç)**  
```
–ò—Å–ø–æ–ª—å–∑—É–π @extend_schema —Å request/response —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ç–æ—Ä–∞–º–∏.
–î–ª—è /check: request=CheckTaskRequestSerializer, responses={200: {...}}.
```
**–ö–∞–∫ –ø—Ä–∏–º–µ–Ω–∏–ª**  
–î–æ–±–∞–≤–∏–ª `@extend_schema` –Ω–∞ –æ–±–∞ —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞: —É `/check` —Ç–µ–ø–µ—Ä—å –µ—Å—Ç—å –ø–æ–ª–µ `answer`, —É `/generate-task` - –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞.

---

#### –¢–µ–º–∞ - –ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–∞—è –æ—Ç–º–µ—Ç–∫–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
**–ú–æ–π –ø—Ä–æ–º–ø—Ç**  
```
–ù—É–∂–Ω–æ, —á—Ç–æ–±—ã –ø–æ–≤—Ç–æ—Ä–Ω—ã–π POST /lessons/{id}/complete –Ω–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–ª –∑–∞–ø–∏—Å—å, –∞ —Ç–∏—Ö–æ –≤–æ–∑–≤—Ä–∞—â–∞–ª —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å.
–ö–∞–∫ –ª—É—á—à–µ –æ—Ñ–æ—Ä–º–∏—Ç—å?
```
**–û—Ç–≤–µ—Ç –ò–ò (—Ñ—Ä–∞–≥–º–µ–Ω—Ç)**  
```
–°–¥–µ–ª–∞–π —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–Ω–¥–µ–∫—Å –Ω–∞ (user, lesson) –∏ –≤ –≤—å—é—Ö–µ get_or_create(...).
```
**–ö–∞–∫ –ø—Ä–∏–º–µ–Ω–∏–ª**  
`UserProgress` –∏–º–µ–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å –ø–æ –ø–∞—Ä–µ `(user, lesson)`, –∞ —ç–∫—à–µ–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `get_or_create`. –ü–æ–≤—Ç–æ—Ä–Ω—ã–π –≤—ã–∑–æ–≤ - –±–µ–∑–æ–ø–∞—Å–µ–Ω.

---

#### –¢–µ–º–∞ - –ß–∏—Å—Ç–∫–∞ –∏–º–ø–æ—Ä—Ç–æ–≤ –∏ –ø—Ä–∏–≤–∞—Ç–Ω—ã–µ —Ö–µ–ª–ø–µ—Ä—ã
**–ú–æ–π –ø—Ä–æ–º–ø—Ç**  
```
–ì–¥–µ —Å—Ç–æ–∏—Ç –æ—Å—Ç–∞–≤–∏—Ç—å –ø—Ä–∏–≤–∞—Ç–Ω—ã–µ (_) —Ñ—É–Ω–∫—Ü–∏–∏, –∞ –≥–¥–µ –ª—É—á—à–µ —Å–¥–µ–ª–∞—Ç—å –ø—É–±–ª–∏—á–Ω—ã–º–∏?
```
**–û—Ç–≤–µ—Ç –ò–ò (—Ñ—Ä–∞–≥–º–µ–Ω—Ç)**  
```
–ï—Å–ª–∏ —Ñ—É–Ω–∫—Ü–∏—é –∑–æ–≤—ë—à—å –∏–∑ –¥—Ä—É–≥–æ–≥–æ –º–æ–¥—É–ª—è - —É–±–µ—Ä–∏ '_' (—Å–¥–µ–ª–∞–π –ø—É–±–ª–∏—á–Ω–æ–π).
–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —Ö–µ–ª–ø–µ—Ä—ã, –Ω–µ –≤—ã—Ö–æ–¥—è—â–∏–µ –∑–∞ –º–æ–¥—É–ª—å - –º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å —Å '_'.
```
**–ö–∞–∫ –ø—Ä–∏–º–µ–Ω–∏–ª**  
–ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–ª `_provider_chain` ‚Üí `provider_chain`, –ø–æ—Ç–æ–º—É —á—Ç–æ –µ—ë –∏—Å–ø–æ–ª—å–∑—É—é—Ç –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã; –æ—Å—Ç–∞–ª—å–Ω–æ–µ –ø—Ä–∏–≤–∞—Ç–Ω–æ–µ –æ—Å—Ç–∞–≤–∏–ª –≤–Ω—É—Ç—Ä–∏ –º–æ–¥—É–ª–µ–π.

---

#### –¢–µ–º–∞ - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ fallback
**–ú–æ–π –ø—Ä–æ–º–ø—Ç:**
```
–ß—Ç–æ –¥–µ–ª–∞—Ç—å, –µ—Å–ª–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω –∏–ª–∏ –≤–µ—Ä–Ω—É–ª –ø—É—Å—Ç–æ–π –æ—Ç–≤–µ—Ç?
```
**–û—Ç–≤–µ—Ç –ò–ò:**
```
–í–æ–∑–≤—Ä–∞—â–∞–π 502 –¥–ª—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã—Ö —Å–±–æ–µ–≤. –ù–µ –ø–∞–¥–∞–π –Ω–∞ –ø—É—Å—Ç–æ–º –æ—Ç–≤–µ—Ç–µ: –ø—Ä–æ—Å—Ç–æ –ø—Ä–æ–±—É–π —Å–ª–µ–¥—É—é—â–∏–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä.
```
**–ö–∞–∫ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–ª:**
- `ask_ai(...)` –ø–µ—Ä–µ–±–∏—Ä–∞–µ—Ç —Ü–µ–ø–æ—á–∫—É –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–µ—Ä–≤—ã–π –Ω–µ–ø—É—Å—Ç–æ–π –æ—Ç–≤–µ—Ç.
- –ï—Å–ª–∏ –≤—Å–µ –ø—Ä–æ–≤–∞–ª–∏–ª–∏—Å—å - –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –≤–µ—Ä–Ω—ë—Ç `502`, –∞ –Ω–µ 500 (–∫–æ–Ω—Ç—Ä–∞–∫—Ç API —è—Å–µ–Ω –¥–ª—è —Ñ—Ä–æ–Ω—Ç–∞).
